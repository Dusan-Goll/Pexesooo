class GameEnd extends GamePrepare{constructor(){super(),this.main=document.querySelector("main"),this.stats,this.maxScore,this.winners,this.losers}gameEnding(){this.removeVacants(),this.getStats(),this.getMaxScore(),this.getWinnersAndLosers(),this.showGameResult(),this.highlightWinners(),this.addExitButton()}removeVacants(){this.desk.querySelectorAll(".vacant").forEach(t=>t.remove())}getStats(){this.stats=[],this.scoreBoxes.forEach(t=>{let e={node:t,name:t.id,score:t.querySelector(".score").textContent};this.stats.push(e)})}getMaxScore(){this.maxScore=Math.max(...this.stats.map(t=>t.score))}getWinnersAndLosers(){this.winners=this.stats.filter(t=>t.score==this.maxScore),this.losers=this.stats.filter(t=>t.score!=this.maxScore)}showGameResult(){let t=document.createElement("p");if(t.setAttribute("class","result"),1===this.winners.length)t.textContent=`Player ${this.winners[0].name} won.`;else{let e=this.winners.map(t=>t.name);t.textContent=`Players ${e.join(" & ")} won.`}this.desk.appendChild(t)}highlightWinners(){this.winners.forEach(t=>{t.node.setAttribute("class","score-box winner")}),this.losers.forEach(t=>{t.node.setAttribute("class","score-box loser")})}addExitButton(){let t=document.createElement("a"),e=document.createElement("nav");t.textContent="back to menu",t.setAttribute("href","./index.html"),t.setAttribute("id","back-to-menu"),e.appendChild(t),this.desk.appendChild(e)}}